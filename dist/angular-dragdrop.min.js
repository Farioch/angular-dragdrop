!function(e,a){if("object"==typeof exports&&"object"==typeof module)module.exports=a(require("angular"));else if("function"==typeof define&&define.amd)define(["angular"],a);else{var n="object"==typeof exports?a(require("angular")):a(e._);for(var t in n)("object"==typeof exports?exports:e)[t]=n[t]}}(this,function(e){return function(e){var a={};function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=a,n.d=function(e,a,t){n.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:t})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(a,"a",a),a},n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},n.p="",n(n.s=4)}([function(a,n){a.exports=e},function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t,r=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),o=n(0),f=(t=o)&&t.__esModule?t:{default:t};var d=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"generate",value:function(e,a){var n=f.default.extend({},defaultConfig,a||{}),t=document.createElement("canvas");t.height=n.height,t.width=n.width;var r=t.getContext("2d");r.fillStyle=n.backgroundColor,r.fillRect(0,0,n.width,n.height),r.font=n.font,r.fillStyle=n.fontColor;var o=function(e,a,n){var t=e.measureText(a).width;if(t<n.width)return a;for(;t+n.padding>n.width;)a=a.substring(0,a.length-1),t=e.measureText(a+"…").width;return a+"…"}(r,e,n);r.fillText(o,4,n.padding+4);var d=new Image;return d.src=t.toDataURL(),{image:d,xOffset:n.xOffset,yOffset:n.yOffset}}}]),e}();a.default=d,e.exports=a.default},function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t,r=n(0),o=(t=r)&&t.__esModule?t:{default:t};function f(e,a){return function(n,t,r){var f=0,d=r.dropChannel||"defaultchannel",i="",l=r.dragEnterClass||"on-drag-enter",s=r.dragHoverClass||"on-drag-hover",u=e(r.onDragEnter),c=e(r.onDragLeave);function v(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation();var t=e(r.uiOnDragOver);return n.$evalAsync(function(){t(n,{$event:a,$channel:d})}),!1}function g(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),0===--f&&(n.$evalAsync(function(){c(n,{$event:a,$channel:d})}),t.addClass(l),t.removeClass(s));var o=e(r.uiOnDragLeave);n.$evalAsync(function(){o(n,{$event:a,$channel:d})})}function p(o){o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation(),0===f&&(n.$evalAsync(function(){u(n,{$event:o,$channel:d})}),t.removeClass(l),t.addClass(s)),f++;var c=e(r.uiOnDragEnter);n.$evalAsync(function(){c(n,{$event:o,$channel:d})}),a.$broadcast("ANGULAR_HOVER",i)}function y(a){a.originalEvent&&(a.dataTransfer=a.originalEvent.dataTransfer),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation();var d=a.dataTransfer.getData("text");d=o.default.fromJson(d);var i=function(e){for(var a={x:e.offsetX,y:e.offsetY},n=e.target;n!==t[0];)if(a.x=a.x+n.offsetLeft,a.y=a.y+n.offsetTop,!(n=n.offsetParent))return null;return a}(a),s=i?{x:i.x-d.offset.x,y:i.y-d.offset.y}:null;!function(e){e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),void 0!==e.dataTransfer&&"none"===e.dataTransfer.dropEffect&&("copy"===e.dataTransfer.effectAllowed||"move"===e.dataTransfer.effectAllowed?e.dataTransfer.dropEffect=e.dataTransfer.effectAllowed:"copyMove"!==e.dataTransfer.effectAllowed&&"copymove"!==e.dataTransfer.effectAllowed||(e.dataTransfer.dropEffect=e.ctrlKey?"copy":"move"))}(a);var u=e(r.uiOnDrop);n.$evalAsync(function(){u(n,{$data:d.data,$event:a,$channel:d.channel,$position:s})}),t.removeClass(l),f=0}function b(e){return e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.dataTransfer.dropEffect="none",!1}var T=a.$on("ANGULAR_DRAG_START",function(a,o,f,s){i=f;var u=!0;((function(e,a){return"*"===a||new RegExp("(\\s|[,])+("+e+")(\\s|[,])+","i").test(","+a+",")})(f,d)||(u=!1),u&&r.dropValidate)&&(u=e(r.dropValidate)(n,{$drop:{scope:n,element:t},$event:o,$data:s.data,$channel:s.channel}));u?(t.bind("dragover",v),t.bind("dragenter",p),t.bind("dragleave",g),t.bind("drop",y),t.addClass(l)):(t.bind("dragover",b),t.bind("dragenter",b),t.bind("dragleave",b),t.bind("drop",b),t.removeClass(l))}),$=a.$on("ANGULAR_DRAG_END",function(){t.unbind("dragover",v),t.unbind("dragenter",p),t.unbind("dragleave",g),t.unbind("drop",y),t.removeClass(s),t.removeClass(l),t.unbind("dragover",b),t.unbind("dragenter",b),t.unbind("dragleave",b),t.unbind("drop",b)});n.$on("$destroy",function(){T(),$()}),r.$observe("dropChannel",function(e){e&&(d=e)})}}f.$inject=["$parse","$rootScope"],a.default=f,e.exports=a.default},function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t,r=n(0),o=(t=r)&&t.__esModule?t:{default:t};function f(e,a,n){return function(t,r,f){var d,i,l=!1,s=f.draggingClass||"on-dragging";function u(n){n.originalEvent&&(n.dataTransfer=n.originalEvent.dataTransfer),setTimeout(function(){r.unbind("$destroy",u)},0);var o=f.dragChannel||"defaultchannel";if(a.$broadcast("ANGULAR_DRAG_END",n,o),function(e){e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),void 0!==e.dataTransfer&&"none"===e.dataTransfer.dropEffect&&("copy"===e.dataTransfer.effectAllowed||"move"===e.dataTransfer.effectAllowed?e.dataTransfer.dropEffect=e.dataTransfer.effectAllowed:"copyMove"!==e.dataTransfer.effectAllowed&&"copymove"!==e.dataTransfer.effectAllowed||(e.dataTransfer.dropEffect=e.ctrlKey?"copy":"move"))}(n),n.dataTransfer&&"none"!==n.dataTransfer.dropEffect){if(f.onDropSuccess){var d=e(f.onDropSuccess);t.$evalAsync(function(){d(t,{$event:n})})}}else if(n.dataTransfer&&"none"===n.dataTransfer.dropEffect&&f.onDropFailure){var i=e(f.onDropFailure);t.$evalAsync(function(){i(t,{$event:n})})}r.removeClass(s)}function c(c){if(c.originalEvent&&(c.dataTransfer=c.originalEvent.dataTransfer),!l||i.classList.contains(d)){var v=f.dragChannel||"defaultchannel",g="";f.drag&&(g=t.$eval(f.drag));var p=f.dragImage||null;r.addClass(s),r.bind("$destroy",u);var y=!(document.uniqueID||window.opera);if(p&&y){var b=e(f.dragImage);t.$apply(function(){var e=b(t,{$event:c});if(e&&(o.default.isString(e)&&(e=n.generate(e)),e.image)){var a=e.xOffset||0,r=e.yOffset||0;c.dataTransfer.setDragImage(e.image,a,r)}})}else f.dragImageElementId&&function(a,n){var r;a.originalEvent&&(a.dataTransfer=a.originalEvent.dataTransfer),r=e(n),t.$apply(function(){var e,n=r(t,{$event:a});n&&o.default.isString(n)&&(e=document.getElementById(n))&&a.dataTransfer.setDragImage(e,0,0)})}(c,f.dragImageElementId);var T={data:g,channel:v,offset:{x:c.offsetX,y:c.offsetY}},$=o.default.toJson(T);if(c.dataTransfer.setData("text",$),c.dataTransfer.effectAllowed="copyMove",f.onDragStart){var m=e(f.onDragStart);t.$evalAsync(function(){m(t,{$event:c})})}a.$broadcast("ANGULAR_DRAG_START",c,v,T)}else c.preventDefault()}r.attr("draggable",!1),t.$watch(f.uiDraggable,function(e){e?(r.attr("draggable",e),r.bind("dragend",u),r.bind("dragstart",c)):(r.removeAttr("draggable"),r.unbind("dragend",u),r.unbind("dragstart",c))}),o.default.isString(f.dragHandleClass)&&(l=!0,d=f.dragHandleClass.trim()||"drag-handle",r.bind("mousedown",function(e){i=e.target}))}}f.$inject=["$parse","$rootScope","dragImageService"],a.default=f,e.exports=a.default},function(e,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=d(n(0)),r=d(n(3)),o=d(n(2)),f=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}var i=t.default.module("angular-dragdrop",[]);"ondrag"in document.createElement("a")&&(i.directive("uiDraggable",r.default),i.directive("uiDroppable",o.default),i.service("dragImageService",f.default)),a.default=i.name,i.exports=a.default}])["angular-dragdrop"]});